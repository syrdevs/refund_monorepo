{"version":3,"sources":["../../../src/utils/setAuth.js"],"names":["isToken","token","localStorage","getItem","destroySession","removeItem","location","replace"],"mappings":";;;;;;;AACA;;AAGe,oBAA0B;AAAA,MAAjBA,OAAiB,uEAAP,KAAO;AAEvC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAd;;AAEA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3BF,IAAAA,YAAY,CAACG,UAAb,CAAwB,OAAxB;AACAH,IAAAA,YAAY,CAACG,UAAb,CAAwB,oBAAxB;AACAC,IAAAA,QAAQ,CAACC,OAAT,CAAiB,aAAjB;AACD,GAJD,CAJuC,CAWvC;;;AACA,MAAIN,KAAK,IAAID,OAAb,EAAsB;AAIpB;AAEA,WAAOC,KAAP;AACD,GAnBsC,CAqBvC;;;AACA,MAAIA,KAAJ,EAAW,CAOV;AAHC;;;AAKF;;;AACA,MAAI,CAACC,YAAY,CAACC,OAAb,CAAqB,oBAArB,CAAL,EAAiD,CAC/C;AACD;AAEF","sourcesContent":["\r\nimport { stringify } from 'qs';\r\n\r\n\r\nexport default function(isToken = false) {\r\n\r\n  const token = localStorage.getItem('AUTH_TOKEN');\r\n\r\n  const destroySession = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('antd-pro-authority');\r\n    location.replace('/user/login');\r\n  };\r\n\r\n\r\n  // if token and isToken\r\n  if (token && isToken) {\r\n\r\n\r\n\r\n    //return decoded.exp > Date.now() / 1000 ? token : false;\r\n\r\n    return token;\r\n  }\r\n\r\n  // if token expired\r\n  if (token) {\r\n\r\n\r\n\r\n    /*if (!(decoded.exp > Date.now() / 1000)) {\r\n     destroySession();\r\n    }*/\r\n  }\r\n\r\n  // if auth antd-pro-authority\r\n  if (!localStorage.getItem('antd-pro-authority')) {\r\n    //destroySession();\r\n  }\r\n\r\n}\r\n"],"file":"setAuth.js"}